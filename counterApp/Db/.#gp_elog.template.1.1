#! Generated by VisualDCT v2.4
#! DBDSTART
#! DBD("../../dbd/GPIB.dbd")
#! DBDEND
#!
#!
#! 20090919
#! Janice Nelson
#!
#! 5 bi PVs for auto elog entries
#!
#! 20110922 JNelson
#!  added 3 PVs for clock... which has nothing to do with 
#!   the elog...

record(bi,"$(IOC):ELOG:NFS:WRITE_ERROR") {
	field(DESC,"flag for nfs mount")
	field(PINI,"YES")
	field(DTYP,"Raw Soft Channel")
	field(ZNAM,"no error")
	field(ONAM,"Write error")
}
record(bi,"$(IOC):ELOG:WRITE:DISABLE") {
	field(DESC,"dis auto e-log")
	field(PINI,"YES")
	field(DTYP,"Raw Soft Channel")
	field(ZNAM,"enabled")
	field(ONAM,"disabled")
}
record(bi,"$(IOC):ELOG:TRP1HVPS:DISABLE") {
	field(DESC,"dis trp1hvps e-log")
	field(PINI,"YES")
	field(DTYP,"Raw Soft Channel")
	field(ZNAM,"enabled")
	field(ONAM,"disabled")
}
record(bi,"$(IOC):ELOG:TRP2HVPS:DISABLE") {
	field(DESC,"dis trp2hvps e-log")
	field(PINI,"YES")
	field(DTYP,"Raw Soft Channel")
	field(ZNAM,"enabled")
	field(ONAM,"disabled")
}
record(bi,"$(IOC):ELOG:TRP1MOD:DISABLE") {
	field(DESC,"dis trp1mod e-log")
	field(PINI,"YES")
	field(DTYP,"Raw Soft Channel")
	field(ZNAM,"enabled")
	field(ONAM,"disabled")
}
record(bi,"$(IOC):ELOG:TRP2MOD:DISABLE") {
	field(DESC,"dis trp2mod e-log")
	field(PINI,"YES")
	field(DTYP,"Raw Soft Channel")
	field(ZNAM,"enabled")
	field(ONAM,"disabled")
}
record(bi,"$(IOC):ELOG:GUN:DISABLE") {
	field(DESC,"dis nlctapps")
	field(PINI,"YES")
	field(DTYP,"Raw Soft Channel")
	field(ZNAM,"enabled")
	field(ONAM,"disabled")
}
record(bi,"$(IOC):ELOG:PPSE:DISABLE") {
	field(DESC,"dis eh pps")
	field(PINI,"YES")
	field(DTYP,"Raw Soft Channel")
	field(ZNAM,"enabled")
	field(ONAM,"disabled")
#	field(RVAL,"1")
}
record(bi,"$(IOC):ELOG:PPSN:DISABLE") {
	field(DESC,"dis nlctapps")
	field(PINI,"YES")
	field(DTYP,"Raw Soft Channel")
	field(ZNAM,"enabled")
	field(ONAM,"disabled")
#	field(RVAL,"1")
}
#spare
record(bi,"$(IOC):ELOG:ACTION1:DISABLE") {
	field(DESC,"spare dis e-log")
	field(PINI,"YES")
	field(DTYP,"Raw Soft Channel")
	field(ZNAM,"enabled")
	field(ONAM,"disabled")
}
record(mbbi, "$(IOC):ELOG:NPPS:ASTATE") {
  field(DESC, "Access state from SCP")
	field(SCAN, "1 second")
	field(PINI, "YES")
	field(INP, "TA01:PPS:5:ACCESS PP NMS")
	field(ZRST, "UNKNOWN")
	field(ONST, "N/A")
	field(TWST, "C/A")
	field(THST, "P/A")
	field(FRST, "R/A")
	field(SXST, "CAMERR")
	field(ZRSV, "INVALID")
	field(ONSV, "NO_ALARM")
	field(TWSV, "MAJOR")
	field(THSV, "MAJOR")
	field(FRSV, "MAJOR")
	field(SXSV, "MINOR")
#	field(COSV, "MAJOR")
}

record(calc, "$(IOC):ELOG:NPPS:ACCESS") {
  field(DESC, "Access state changed?")
	field(SCAN, "10 second")
	field(PINI, "YES")
	field(CALC, "A==B?0:1")
	field(INPA, "$(IOC):ELOG:NPPS:ASTATE")
	field(INPB, "$(IOC):ELOG:NPPS:ASTOLD")
	field(HIHI, "1")
	field(LOLO, "0")
	field(HHSV, "MAJOR")
	field(LLSV, "NO_ALARM")
}

record(ai, "$(IOC):ELOG:NPPS:ASTOLD") {
  field(DESC, "Old Access state")
	field(SCAN, "10 second")
	field(INP, "$(IOC):ELOG:NPPS:ASTATE")
	field(PINI, "YES")
	field(TPRO, "$(TPRO)")
}

record(calc, "$(IOC):ELOG:NPPS:SUMYSTAT") {
  field(DESC, "sumstat for nlctapps")
	field(SCAN, "1 second")
	field(CALC, "A+B+C+D")
	field(INPD, "$(IOC):ELOG:NPPS:ACCESS.SEVR NPP MS")
	field(INPA, "$(IOC):ELOG:NPPS:SECURITY.SEVR NPP MS")
	field(INPB, "$(IOC):ELOG:NPPS:STPR_ENB.SEVR NPP MS")
	field(INPC, "$(IOC):ELOG:NPPS:SEARCHOK.SEVR NPP MS")
}

record(calc, "$(IOC):ELOG:NPPS:SEARCHOK") {
  field(DESC, "search ok in N/A")
	field(SCAN, "1 second")
	field(CALC, "A=1?(B=1?0:1):0")
	field(INPA, "$(IOC):ELOG:NPPS:ASTATE")
	field(INPB, "$(IOC):ELOG:NPPS:SEARCH")
	field(HIHI, "1")
	field(LOLO, "0")
	field(HHSV, "MAJOR")
	field(LLSV, "NO_ALARM")
}

record(mbbi, "$(IOC):ELOG:NPPS:MODE") {
  field(DESC, "PPS status from SCP")
	field(SCAN, "1 second")
	field(PINI, "YES")
	field(INP, "TA01:PPS:4:MODE CPP")
	field(ZRST, "what?")
	field(ONST, "LOCAL")
	field(TWST, "REMOTE")
	field(THST, "CAMERR")
	field(SXST, "BADVMS")
	field(ZRSV, "INVALID")
	field(ONSV, "NO_ALARM")
	field(TWSV, "NO_ALARM")
  field(THSV, "MINOR")
	field(SXSV, "INVALID")
	field(COSV, "MAJOR")
}

record(mbbi, "$(IOC):ELOG:EPPS:ASTATE") {
  field(DESC, "Access state from SCP")
	field(SCAN, "1 second")
	field(PINI, "YES")
	field(INP, "TA02:PPS:5:EHACCESS CPP NMS")
	field(ZRST, "UNKNOWN")
	field(ONST, "N/A")
	field(TWST, "C/A")
	field(THST, "P/A")
	field(FRST, "R/A")
	field(SXST, "CAMERR")
	field(ZRSV, "INVALID")
	field(ONSV, "NO_ALARM")
	field(TWSV, "MAJOR")
	field(THSV, "MAJOR")
	field(FRSV, "MAJOR")
	field(SXSV, "MINOR")
	field(COSV, "MAJOR")
}

record(calc, "$(IOC):ELOG:EPPS:ACCESS") {
  field(DESC, "Access state changed?")
	field(SCAN, "10 second")
	field(PINI, "YES")
	field(CALC, "A==B?0:1")
	field(INPA, "$(IOC):ELOG:EPPS:ASTATE")
	field(INPB, "$(IOC):ELOG:EPPS:ASTOLD")
	field(HIHI, "1")
	field(LOLO, "0")
	field(HHSV, "MAJOR")
	field(LLSV, "NO_ALARM")
#	field(FLNK, "$(IOC):ELOG:EPPS:ASEQ")
}
	
record(ai, "$(IOC):ELOG:EPPS:ASTOLD") {
  field(DESC, "Old Access state")
	field(SCAN, "10 second")
	field(INP, "$(IOC):ELOG:EPPS:ASTATE")
	field(PINI, "YES")
	field(TPRO, "$(TPRO)")
}

record(calc, "$(IOC):ELOG:EPPS:SUMYSTAT") {
  field(DESC, "sumstat for e/h pps")
	field(SCAN, "1 second")
	field(CALC, "A+B")
	field(INPA, "$(IOC):ELOG:EPPS:ACCESS.SEVR NPP MS")
	field(INPB, "$(IOC):ELOG:EPPS:SEARCHOK.SEVR NPP MS")
}

record(calc, "$(IOC):ELOG:EPPS:SEARCHOK") {
  field(DESC, "search ok in N/A")
	field(SCAN, "1 second")
	field(CALC, "A=1?(B=1?0:1):0")
	field(INPA, "$(IOC):ELOG:EPPS:ASTATE")
	field(INPB, "$(IOC):ELOG:EPPS:SEARCH")
	field(HIHI, "1")
	field(LOLO, "0")
	field(HHSV, "MAJOR")
	field(LLSV, "NO_ALARM")
}
#record(timestamp, "NLCTA:TOD") {
#  field(DESC, "NLCTA timestamp")
#  field(TST, "MM/DD/YY HH:MM:SS")
#  field(SCAN, "1 second")
#}

#record(scalcout, "NLCTA:CLOCKHOUR") {
#  field(DESC, "hours in the current time")
#  field(SCAN, "1 second")
#  field(CALC, "SSCANF(AA, '%*9c%2d')")
#  field(INAA, "NLCTA:TOD")
#}
#

#record(scalcout, "NLCTA:CLOCKSEC") {
#  field(DESC, "seconds in the current time")
#  field(SCAN, "1 second")
#  field(CALC, "SSCANF(AA, '%*15c%2d')")
#  field(INAA, "NLCTA:TOD")
#}

#record(scalcout, "NLCTA:CLOCKMIN") {
#  field(DESC, "minutes in the current time")
#  field(SCAN, "1 second")
#  field(CALC, "SSCANF(AA, '%*12c%2d')")
#  field(INAA, "NLCTA:TOD")
#}
 
